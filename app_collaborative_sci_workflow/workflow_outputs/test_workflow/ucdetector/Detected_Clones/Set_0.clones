$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719678
src/main/org/ucdetector/UCDetectorPlugin.java 427 437
rc/main/org/ucdetector/UCDetectorPlugin.jav 444 454
----------------------------------------
  public static String toString(Map<? extends Object, ? extends Object> map, String format) {
    if (map == null) {
      return String.valueOf(map);
    }
    String formatUsed = (format == null ? "\t%s = %s%n" : format);
    StringBuilder result = new StringBuilder();
    for (Object key : map.keySet()) {
      result.append(String.format(formatUsed, key, map.get(key)));
    }
    return result.toString();
  }

----------------------------------------
  public static String toString(Collection<? extends Object> collection, String separator) {
    if (collection == null) {
      return String.valueOf(collection);
    }
    StringBuilder result = new StringBuilder();
    String separatorUsed = (separator == null ? "\n" : separator);
    for (Object object : collection) {
      result.append(result.length() == 0 ? "" : separatorUsed).append(object);
    }
    return result.toString();
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719679
src/main/org/ucdetector/util/JavaElementUtil.java 82 91
rc/main/org/ucdetector/util/JavaElementUtil.jav 97 105
----------------------------------------
  public static IPackageFragmentRoot getPackageFragmentRootFor(IJavaElement javaElement) {
    IJavaElement parent = javaElement.getParent();
    while (true) {
      // System.out.println("parent =\t" + dumpJavaElement(parent));
      if (parent == null || parent instanceof IPackageFragmentRoot) {
        return (IPackageFragmentRoot) parent;
      }
      parent = parent.getParent();
    }
  }

----------------------------------------
  public static IPackageFragment getPackageFor(IJavaElement javaElement) {
    IJavaElement parent = javaElement.getParent();
    while (true) {
      if (parent instanceof IPackageFragment || parent == null) {
        return (IPackageFragment) parent;
      }
      parent = parent.getParent();
    }
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719680
src/main/org/ucdetector/util/JavaElementUtil.java 84 90
rc/main/org/ucdetector/util/JavaElementUtil.jav 99 104
----------------------------------------
    while (true) {
      // System.out.println("parent =\t" + dumpJavaElement(parent));
      if (parent == null || parent instanceof IPackageFragmentRoot) {
        return (IPackageFragmentRoot) parent;
      }
      parent = parent.getParent();
    }

----------------------------------------
    while (true) {
      if (parent instanceof IPackageFragment || parent == null) {
        return (IPackageFragment) parent;
      }
      parent = parent.getParent();
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719681
src/main/org/ucdetector/util/JavaElementUtil.java 678 684
rc/main/org/ucdetector/util/JavaElementUtil.jav 685 694
----------------------------------------
      if (member instanceof IMethod) {
        IMethod method = (IMethod) member;
        if (method.isConstructor()) {
          return MemberInfo.Constructor;
        }
        return MemberInfo.Method;
      }

----------------------------------------
      if (member instanceof IField) {
        IField field = (IField) member;
        if (field.isEnumConstant()) {
          return MemberInfo.EnumConstant;
        }
        if (JavaElementUtil.isConstant(field)) {
          return MemberInfo.Constant;
        }
        return MemberInfo.Field;
      }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719682
src/main/org/ucdetector/util/JavaElementUtil.java 685 694
rc/main/org/ucdetector/search/VisibilityHandler.jav 120 131
----------------------------------------
      if (member instanceof IField) {
        IField field = (IField) member;
        if (field.isEnumConstant()) {
          return MemberInfo.EnumConstant;
        }
        if (JavaElementUtil.isConstant(field)) {
          return MemberInfo.Constant;
        }
        return MemberInfo.Field;
      }

----------------------------------------
    if (startElement instanceof IField) {
      IField field = (IField) startElement;
      if (field.isEnumConstant()) {
        // No modifier allowed for enum constants!
        return false;
      }
      if (JavaElementUtil.isInterfaceField(field)) {
        // fix bug [ 2269486 ] Constants in Interfaces Can't be Private
        // only public, static & final are permitted for interface fields
        return false; // default visibility means public!
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719683
src/main/org/ucdetector/UCDHeadless.java 212 218
rc/main/org/ucdetector/util/JavaElementUtil.jav 728 734
----------------------------------------
    if (report == null || Report.eachproject == report) {
      for (IJavaElement javaElement : javaElementsToIterate) {
        AbstractUCDetectorIterator iterator = new UCDetectorIterator();
        iterator.setMonitor(ucdMonitor);
        iterator.iterate(new IJavaElement[] { javaElement });
      }
    }

----------------------------------------
  public static String getElementNames(Collection<? extends IJavaElement> javaElements) { // NO_UCD
    StringBuilder sb = new StringBuilder();
    for (IJavaElement javaElement : javaElements) {
      sb.append(getElementName(javaElement)).append("\n\t");
    }
    return sb.toString();
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719684
src/main/org/ucdetector/util/JavaElementUtil.java 113 119
rc/main/org/ucdetector/util/JavaElementUtil.jav 779 784
----------------------------------------
  public static String getSourceFolderProjectRelativePath(IPackageFragmentRoot root) {
    IResource resource = root.getResource();
    if (resource != null && resource.getProjectRelativePath() != null) {
      return resource.getProjectRelativePath().toOSString();
    }
    return null;
  }

----------------------------------------
    for (IAnnotation annotation : method.getAnnotations()) {
      String annotationName = annotation.getElementName();
      if ("Override".equals(annotationName) || "java.lang.Override".equals(annotationName)) {
        return true;
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719688
src/main/org/ucdetector/util/JavaElementUtil.java 113 119
rc/main/org/ucdetector/search/LineManger.jav 260 266
----------------------------------------
  public static String getSourceFolderProjectRelativePath(IPackageFragmentRoot root) {
    IResource resource = root.getResource();
    if (resource != null && resource.getProjectRelativePath() != null) {
      return resource.getProjectRelativePath().toOSString();
    }
    return null;
  }

----------------------------------------
      if (typeBinding != null) {
        String name = typeBinding.getName();
        String fullName = typeBinding.getQualifiedName();
        if (Prefs.isFilterAnnotation(fullName) || Prefs.isFilterAnnotation(name)) {
          return true;
        }
      }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719685
src/main/org/ucdetector/util/JavaElementUtil.java 779 784
rc/main/org/ucdetector/search/LineManger.jav 260 266
----------------------------------------
    for (IAnnotation annotation : method.getAnnotations()) {
      String annotationName = annotation.getElementName();
      if ("Override".equals(annotationName) || "java.lang.Override".equals(annotationName)) {
        return true;
      }
    }

----------------------------------------
      if (typeBinding != null) {
        String name = typeBinding.getName();
        String fullName = typeBinding.getQualifiedName();
        if (Prefs.isFilterAnnotation(fullName) || Prefs.isFilterAnnotation(name)) {
          return true;
        }
      }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719687
src/main/org/ucdetector/UCDHeadless.java 212 218
rc/main/org/ucdetector/preferences/ModesPanel.jav 257 262
----------------------------------------
    if (report == null || Report.eachproject == report) {
      for (IJavaElement javaElement : javaElementsToIterate) {
        AbstractUCDetectorIterator iterator = new UCDetectorIterator();
        iterator.setMonitor(ucdMonitor);
        iterator.iterate(new IJavaElement[] { javaElement });
      }
    }

----------------------------------------
    for (Composite group : page.groups) {
      Control[] controls = group.getChildren();
      for (Control control : controls) {
        control.setEnabled(isCustom);
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719809
src/main/org/ucdetector/UCDHeadless.java 212 218
rc/main/org/ucdetector/UCDetectorPlugin.jav 196 202
----------------------------------------
    if (report == null || Report.eachproject == report) {
      for (IJavaElement javaElement : javaElementsToIterate) {
        AbstractUCDetectorIterator iterator = new UCDetectorIterator();
        iterator.setMonitor(ucdMonitor);
        iterator.iterate(new IJavaElement[] { javaElement });
      }
    }

----------------------------------------
    try {
      String[] propertyNames = ePrefs.keys();
      Arrays.sort(propertyNames);
      for (String propertyName : propertyNames) {
        result.put(propertyName, ePrefs.get(propertyName, null));
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719686
src/main/org/ucdetector/preferences/ModesPanel.java 257 262
rc/main/org/ucdetector/UCDetectorPlugin.jav 196 202
----------------------------------------
    for (Composite group : page.groups) {
      Control[] controls = group.getChildren();
      for (Control control : controls) {
        control.setEnabled(isCustom);
      }
    }

----------------------------------------
    try {
      String[] propertyNames = ePrefs.keys();
      Arrays.sort(propertyNames);
      for (String propertyName : propertyNames) {
        result.put(propertyName, ePrefs.get(propertyName, null));
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719689
src/main/org/ucdetector/search/LineManger.java 111 124
rc/main/org/ucdetector/search/LineManger.jav 126 139
----------------------------------------
  public int getLineEnd(IMember element) {
    try {
      ISourceRange sourceRange = element.getSourceRange();
      int offsetEnd = sourceRange.getOffset() + sourceRange.getLength();
      IScanner scanner = createScanner(element);
      if (scanner != null) {
        return scanner.getLineNumber(offsetEnd);
      }
    }
    catch (CoreException e) {
      Log.warn("Can't get LineEnd: %s", e); //$NON-NLS-1$
    }
    return LINE_NOT_FOUND;
  }

----------------------------------------
  public int getLineStart(IMember element) {
    try {
      ISourceRange javaDocRange = element.getJavadocRange();
      int offset = javaDocRange != null ? javaDocRange.getOffset() : element.getSourceRange().getOffset();
      IScanner scanner = createScanner(element);
      if (scanner != null) {
        return scanner.getLineNumber(offset);
      }
    }
    catch (CoreException e) {
      Log.warn("Can't get LineEnd: %s", e); //$NON-NLS-1$
    }
    return LINE_NOT_FOUND;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719690
src/main/org/ucdetector/search/LineManger.java 112 119
rc/main/org/ucdetector/search/LineManger.jav 127 134
----------------------------------------
    try {
      ISourceRange sourceRange = element.getSourceRange();
      int offsetEnd = sourceRange.getOffset() + sourceRange.getLength();
      IScanner scanner = createScanner(element);
      if (scanner != null) {
        return scanner.getLineNumber(offsetEnd);
      }
    }

----------------------------------------
    try {
      ISourceRange javaDocRange = element.getJavadocRange();
      int offset = javaDocRange != null ? javaDocRange.getOffset() : element.getSourceRange().getOffset();
      IScanner scanner = createScanner(element);
      if (scanner != null) {
        return scanner.getLineNumber(offset);
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719691
src/main/org/ucdetector/preferences/UCDetectorPreferencePage.java 108 114
rc/main/org/ucdetector/preferences/UCDetectorPreferencePage.jav 116 121
----------------------------------------
  private void createTabIgnore() {
    Composite tab = createTab(Messages.PreferencePage_TabIgnore);
    createIgnoreResourcesGroup(tab);
    createIgnoreClassesGroup(tab);
    createIgnoreMarkedCode(tab);
    createIgnoreOthers(tab);
  }

----------------------------------------
  private void createTabDetect() {
    Composite composite = createTab(Messages.PreferencePage_TabDetect);
    createDetectGroup(composite);
    createFileSearchGroup(composite);
    createCycleGroup(composite);
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719692
src/main/org/ucdetector/preferences/UCDetectorPreferencePage.java 147 159
rc/main/org/ucdetector/preferences/UCDetectorPreferencePage.jav 161 169
----------------------------------------
  private void createIgnoreClassesGroup(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreClassesGroup);
    appendText(Prefs.FILTER_CLASS, Messages.PreferencePage_IgnoreClassFilter,
        Messages.PreferencePage_IgnoreClassFilterToolTip, spacer);
    appendText(Prefs.FILTER_IMPLEMENTS, Messages.PreferencePage_IgnoreImplements,
        Messages.PreferencePage_IgnoreImplementsToolTip, spacer);
    appendText(Prefs.FILTER_CONTAIN_STRING, Messages.PreferencePage_IgnoreContainString,
        Messages.PreferencePage_IgnoreContainStringToolTip, spacer);
    appendBool(Prefs.FILTER_CLASS_WITH_MAIN_METHOD, Messages.PreferencePage_FilterClassWithMainMethod,
        Messages.PreferencePage_FilterClassWithMainMethodToolTip, spacer, 2);
    appendBool(Prefs.IGNORE_DERIVED, Messages.PreferencePage_IgnoreDerived,
        Messages.PreferencePage_IgnoreDerivedToolTip, spacer, 2);
  }

----------------------------------------
  private void createIgnoreMarkedCode(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreMarkedCodeGroup);
    appendText(Prefs.FILTER_ANNOATIONS, Messages.PreferencePage_IgnoreAnnotationsFilter,
        Messages.PreferencePage_IgnoreAnnotationsFilterToolTip, spacer);
    appendBool(Prefs.IGNORE_DEPRECATED, Messages.PreferencePage_IgnoreDeprecated,
        Messages.PreferencePage_IgnoreDeprecatedToolTip, spacer, 2);
    appendBool(Prefs.IGNORE_NO_UCD, Messages.PreferencePage_IgnoreNoUcd, //
        Messages.PreferencePage_IgnoreNoUcdToolTip, spacer, 2);
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719693
src/main/org/ucdetector/preferences/UCDetectorPreferencePage.java 139 145
rc/main/org/ucdetector/preferences/UCDetectorPreferencePage.jav 171 179
----------------------------------------
  private void createIgnoreResourcesGroup(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreResourcesGroup);
    appendText(Prefs.FILTER_SOURCE_FOLDER, Messages.PreferencePage_IgnoreSourceFolderFilter,
        Messages.PreferencePage_IgnoreSourceFolderFilterToolTip, spacer);
    appendText(Prefs.FILTER_PACKAGE, Messages.PreferencePage_IgnorePackageFilter,
        Messages.PreferencePage_IgnorePackageFilterToolTip, spacer);
  }

----------------------------------------
  private void createIgnoreOthers(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreOthersGroup);
    appendText(Prefs.FILTER_FIELD, Messages.PreferencePage_IgnoreFieldFilter,
        Messages.PreferencePage_IgnoreFieldFilterToolTip, spacer);
    appendText(Prefs.FILTER_METHOD, Messages.PreferencePage_IgnoreMethodFilter,
        Messages.PreferencePage_IgnoreMethodFilterToolTip, spacer);
    appendBool(Prefs.FILTER_BEAN_METHOD, Messages.PreferencePage_IgnoreBeanMethods,
        Messages.PreferencePage_IgnoreBeanMethodsToolTip, spacer, 2);
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719695
src/main/org/ucdetector/preferences/UCDetectorPreferencePage.java 161 169
rc/main/org/ucdetector/preferences/UCDetectorPreferencePage.jav 171 179
----------------------------------------
  private void createIgnoreMarkedCode(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreMarkedCodeGroup);
    appendText(Prefs.FILTER_ANNOATIONS, Messages.PreferencePage_IgnoreAnnotationsFilter,
        Messages.PreferencePage_IgnoreAnnotationsFilterToolTip, spacer);
    appendBool(Prefs.IGNORE_DEPRECATED, Messages.PreferencePage_IgnoreDeprecated,
        Messages.PreferencePage_IgnoreDeprecatedToolTip, spacer, 2);
    appendBool(Prefs.IGNORE_NO_UCD, Messages.PreferencePage_IgnoreNoUcd, //
        Messages.PreferencePage_IgnoreNoUcdToolTip, spacer, 2);
  }

----------------------------------------
  private void createIgnoreOthers(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreOthersGroup);
    appendText(Prefs.FILTER_FIELD, Messages.PreferencePage_IgnoreFieldFilter,
        Messages.PreferencePage_IgnoreFieldFilterToolTip, spacer);
    appendText(Prefs.FILTER_METHOD, Messages.PreferencePage_IgnoreMethodFilter,
        Messages.PreferencePage_IgnoreMethodFilterToolTip, spacer);
    appendBool(Prefs.FILTER_BEAN_METHOD, Messages.PreferencePage_IgnoreBeanMethods,
        Messages.PreferencePage_IgnoreBeanMethodsToolTip, spacer, 2);
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719694
src/main/org/ucdetector/preferences/UCDetectorPreferencePage.java 147 159
rc/main/org/ucdetector/preferences/UCDetectorPreferencePage.jav 171 179
----------------------------------------
  private void createIgnoreClassesGroup(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreClassesGroup);
    appendText(Prefs.FILTER_CLASS, Messages.PreferencePage_IgnoreClassFilter,
        Messages.PreferencePage_IgnoreClassFilterToolTip, spacer);
    appendText(Prefs.FILTER_IMPLEMENTS, Messages.PreferencePage_IgnoreImplements,
        Messages.PreferencePage_IgnoreImplementsToolTip, spacer);
    appendText(Prefs.FILTER_CONTAIN_STRING, Messages.PreferencePage_IgnoreContainString,
        Messages.PreferencePage_IgnoreContainStringToolTip, spacer);
    appendBool(Prefs.FILTER_CLASS_WITH_MAIN_METHOD, Messages.PreferencePage_FilterClassWithMainMethod,
        Messages.PreferencePage_FilterClassWithMainMethodToolTip, spacer, 2);
    appendBool(Prefs.IGNORE_DERIVED, Messages.PreferencePage_IgnoreDerived,
        Messages.PreferencePage_IgnoreDerivedToolTip, spacer, 2);
  }

----------------------------------------
  private void createIgnoreOthers(Composite parentGroups) {
    Composite spacer = createGroup(parentGroups, Messages.PreferencePage_IgnoreOthersGroup);
    appendText(Prefs.FILTER_FIELD, Messages.PreferencePage_IgnoreFieldFilter,
        Messages.PreferencePage_IgnoreFieldFilterToolTip, spacer);
    appendText(Prefs.FILTER_METHOD, Messages.PreferencePage_IgnoreMethodFilter,
        Messages.PreferencePage_IgnoreMethodFilterToolTip, spacer);
    appendBool(Prefs.FILTER_BEAN_METHOD, Messages.PreferencePage_IgnoreBeanMethods,
        Messages.PreferencePage_IgnoreBeanMethodsToolTip, spacer, 2);
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719696
src/main/org/ucdetector/search/VisibilityHandler.java 191 200
rc/main/org/ucdetector/util/JavaElementUtil.jav 778 786
----------------------------------------
  private static boolean hasPublicChild(IType type) throws JavaModelException {
    for (IJavaElement element : type.getChildren()) {
      if (element instanceof IMember) {
        if (Flags.isPublic(((IMember) element).getFlags())) {
          return true;
        }
      }
    }
    return false;
  }

----------------------------------------
  public static boolean hasOverrideAnnotation(IMethod method) throws JavaModelException {
    for (IAnnotation annotation : method.getAnnotations()) {
      String annotationName = annotation.getElementName();
      if ("Override".equals(annotationName) || "java.lang.Override".equals(annotationName)) {
        return true;
      }
    }
    return false;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719697
src/main/org/ucdetector/search/VisibilityHandler.java 192 198
rc/main/org/ucdetector/util/JavaElementUtil.jav 520 525
----------------------------------------
    for (IJavaElement element : type.getChildren()) {
      if (element instanceof IMember) {
        if (Flags.isPublic(((IMember) element).getFlags())) {
          return true;
        }
      }
    }

----------------------------------------
  public static String getTypeName(IJavaElement element) {
    if (element instanceof IType) {
      return ((IType) element).getTypeQualifiedName('.');
    }
    return "class?";
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719698
src/main/org/ucdetector/UCDHeadless.java 181 189
rc/main/org/ucdetector/UCDetectorPlugin.jav 299 308
----------------------------------------
  private static void tryToStartDsPlugin() {
    try {
      Bundle fwAdminBundle = Platform.getBundle("org.eclipse.equinox.ds");
      fwAdminBundle.start();
    }
    catch (Exception e) {
      Log.error("PROBLEMS STARTING DS", e);
    }
  }

----------------------------------------
  public static void closeSave(Closeable closable) {
    if (closable != null) {
      try {
        closable.close();
      }
      catch (Exception e) {
        Log.warn("Can't close %s: %s", closable, e); //$NON-NLS-1$
      }
    }
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719699
src/main/org/ucdetector/UCDHeadless.java 181 189
rc/main/org/ucdetector/UCDetectorPlugin.jav 300 307
----------------------------------------
  private static void tryToStartDsPlugin() {
    try {
      Bundle fwAdminBundle = Platform.getBundle("org.eclipse.equinox.ds");
      fwAdminBundle.start();
    }
    catch (Exception e) {
      Log.error("PROBLEMS STARTING DS", e);
    }
  }

----------------------------------------
    if (closable != null) {
      try {
        closable.close();
      }
      catch (Exception e) {
        Log.warn("Can't close %s: %s", closable, e); //$NON-NLS-1$
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719700
src/main/org/ucdetector/UCDetectorPlugin.java 300 307
rc/main/org/ucdetector/UCDetectorPlugin.jav 373 380
----------------------------------------
    if (closable != null) {
      try {
        closable.close();
      }
      catch (Exception e) {
        Log.warn("Can't close %s: %s", closable, e); //$NON-NLS-1$
      }
    }

----------------------------------------
  public static String getHostName() {
    try {
      return java.net.InetAddress.getLocalHost().getHostName();
    }
    catch (Exception e) {
      return "?";
    }
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719701
src/main/org/ucdetector/search/LineManger.java 200 205
rc/main/org/ucdetector/preferences/Prefs.jav 366 372
----------------------------------------
        if (modifier instanceof Annotation) {
          Annotation annotation = (Annotation) modifier;
          if (isIgnoreAnnotation(annotation)) {
            ignoreLines.add(Integer.valueOf(scanner.getLineNumber(name.getStartPosition())));
          }
        }

----------------------------------------
    if (javaElement instanceof IField) {
      IField field = (IField) javaElement;
      if (isConstant(field)) {
        return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_CONSTANTS));
      }
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_FIELDS));
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719702
src/main/org/ucdetector/preferences/Prefs.java 359 375
rc/main/org/ucdetector/preferences/Prefs.jav 390 406
----------------------------------------
  public static WarnLevel getVisibilityProtectedCheck(IJavaElement javaElement) {
    if (javaElement instanceof IType) {
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_CLASSES));
    }
    if (javaElement instanceof IMethod) {
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_METHODS));
    }
    if (javaElement instanceof IField) {
      IField field = (IField) javaElement;
      if (isConstant(field)) {
        return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_CONSTANTS));
      }
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_FIELDS));
    }
    // Text search: member == null, initializer
    return WarnLevel.WARNING;
  }

----------------------------------------
  public static WarnLevel getVisibilityPrivateCheck(IJavaElement javaElement) {
    if (javaElement instanceof IType) {
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_CLASSES));
    }
    if (javaElement instanceof IMethod) {
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_METHODS));
    }
    if (javaElement instanceof IField) {
      IField field = (IField) javaElement;
      if (isConstant(field)) {
        return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_CONSTANTS));
      }
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_FIELDS));
    }
    // Text search: member == null, initializer
    return WarnLevel.WARNING;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719703
src/main/org/ucdetector/preferences/Prefs.java 366 372
rc/main/org/ucdetector/preferences/Prefs.jav 397 403
----------------------------------------
    if (javaElement instanceof IField) {
      IField field = (IField) javaElement;
      if (isConstant(field)) {
        return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_CONSTANTS));
      }
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PROTECTED_FIELDS));
    }

----------------------------------------
    if (javaElement instanceof IField) {
      IField field = (IField) javaElement;
      if (isConstant(field)) {
        return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_CONSTANTS));
      }
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_FIELDS));
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719704
src/main/org/ucdetector/search/LineManger.java 200 205
rc/main/org/ucdetector/preferences/Prefs.jav 397 403
----------------------------------------
        if (modifier instanceof Annotation) {
          Annotation annotation = (Annotation) modifier;
          if (isIgnoreAnnotation(annotation)) {
            ignoreLines.add(Integer.valueOf(scanner.getLineNumber(name.getStartPosition())));
          }
        }

----------------------------------------
    if (javaElement instanceof IField) {
      IField field = (IField) javaElement;
      if (isConstant(field)) {
        return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_CONSTANTS));
      }
      return WarnLevel.valueOf(getString(ANALYZE_VISIBILITY_PRIVATE_FIELDS));
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719705
src/main/org/ucdetector/UCDetectorPlugin.java 373 380
rc/main/org/ucdetector/preferences/Prefs.jav 425 433
----------------------------------------
  public static String getHostName() {
    try {
      return java.net.InetAddress.getLocalHost().getHostName();
    }
    catch (Exception e) {
      return "?";
    }
  }

----------------------------------------
  private static boolean isConstant(IMember member) {
    try {
      return Flags.isStatic(member.getFlags()) && Flags.isFinal(member.getFlags());
    }
    catch (JavaModelException e) {
      Log.error("Can't get isConstant for: " + member, e);
      return false;
    }
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719706
src/main/org/ucdetector/search/LineManger.java 211 219
rc/main/org/ucdetector/search/LineManger.jav 226 235
----------------------------------------
        if (javadoc != null && javadoc.tags() != null) {
          @SuppressWarnings("unchecked")
          List<TagElement> tags = javadoc.tags();
          for (TagElement tag : tags) {
            if (TagElement.TAG_DEPRECATED.equals(tag.getTagName())) {
              ignoreLines.add(Integer.valueOf(scanner.getLineNumber(name.getStartPosition())));
            }
          }
        }

----------------------------------------
          for (TagElement tag : tags) {
            if (TagElement.TAG_AUTHOR.equals(tag.getTagName())) {
              @SuppressWarnings("unchecked")
              List<TextElement> fragments = tag.fragments();
              if (!fragments.isEmpty() && firstAuthor == null) {
                firstAuthor = fragments.get(0).getText();
                break;
              }
            }
          }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719707
src/cycle/org/ucdetector/cycle/CycleCalculator.java 109 122
rc/main/org/ucdetector/report/ReportNameManager.jav 91 104
----------------------------------------
    for (Cycle cycleToAdd : cyclesFound) {
      boolean isContained = false;
      for (int i = 0; i < result.size(); i++) {
        Cycle cycleAlreadyAdded = result.get(i);
        if (cycleToAdd.contains(cycleAlreadyAdded)) {
          // because big cycles could be build by small cycles
          isContained = true;
          break;
        }
      }
      if (!isContained) {
        result.add(cycleToAdd);
      }
    }

----------------------------------------
    for (int i = 1; i < 1000; i++) {
      String number = FORMAT_REPORT_NUMBER.format(i);
      boolean fileNumberFound = false;
      for (String file : files) {
        if (file.contains(number)) {
          fileNumberFound = true;
          break;
        }
      }
      if (!fileNumberFound) {
        freeFileNumber = number;
        return;
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719708
src/main/org/ucdetector/util/JavaElementUtil.java 194 201
rc/main/org/ucdetector/util/JavaElementUtil.jav 449 455
----------------------------------------
  public static IType getTypeFor(IResource resource) {
    if (isJavaFile(resource)) {
      IJavaElement javaElement = JavaCore.create((IFile) resource);
      return getTypeFor(javaElement, true);
    }
    // Log.debug("Resource %s is not a accessible java file", resource);
    return null;
  }

----------------------------------------
  public static boolean isSerializationField(IField field) throws JavaModelException {
    if (isConstant(field)) {
      return "serialVersionUID".equals(field.getElementName())
          || "serialPersistentFields".equals(field.getElementName());
    }
    return false;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719709
src/main/org/ucdetector/report/ReportParam.java 83 93
rc/main/org/ucdetector/report/ReportParam.jav 101 108
----------------------------------------
        || MarkerFactory.UCD_MARKER_TYPE_USED_FEW.equals(getMarkerType())) {
      if (getJavaElement() instanceof IType) {
        warnLevel = Prefs.getUCDetectionInClasses();
      }
      else if (getJavaElement() instanceof IMethod) {
        warnLevel = Prefs.getUCDetectionInMethods();
      }
      else if (getJavaElement() instanceof IField) {
        warnLevel = Prefs.getUCDetectionInFields();
      }
    }

----------------------------------------
    else if (MarkerFactory.UCD_MARKER_TYPE_USE_FINAL.equals(getMarkerType())) {
      if (getJavaElement() instanceof IMethod) {
        warnLevel = Prefs.getCheckUseFinalMethod();
      }
      else if (getJavaElement() instanceof IField) {
        warnLevel = Prefs.getCheckUseFinalField();
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719710
src/cycle/org/ucdetector/cycle/model/CycleRegion.java 37 43
rc/main/org/ucdetector/report/ReportExtension.jav 42 48
----------------------------------------
  public CycleRegion(CycleMember cycleMember, int offset, int length, int line, String strLine) {
    this.cycleMember = cycleMember;
    this.offset = offset;
    this.length = length;
    this.line = line;
    this.strLine = strLine;
  }

----------------------------------------
  private ReportExtension(String resultFile, String description, String xslt, IUCDetectorReport report, String id) {
    this.resultFile = resultFile;
    this.description = description;
    this.xslt = xslt;
    this.report = report;
    this.id = id;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719735
src/main/org/ucdetector/UCDHeadless.java 181 189
rc/main/org/ucdetector/UCDHeadless.jav 165 178
----------------------------------------
  private static void tryToStartDsPlugin() {
    try {
      Bundle fwAdminBundle = Platform.getBundle("org.eclipse.equinox.ds");
      fwAdminBundle.start();
    }
    catch (Exception e) {
      Log.error("PROBLEMS STARTING DS", e);
    }
  }

----------------------------------------
  private void closeWorkspace() {
    StopWatch stopWatch = new StopWatch();
    try {
      workspace.save(true, new UCDProgressMonitor());// ucdMonitor throws an OperationCanceledException, when ProgressMonitor is canceled
      // causes npe: at org.eclipse.core.internal.resources.Workspace.removeResourceChangeListener(Workspace.java:2302)
      // if (workspace instanceof Workspace) {
      //   ((Workspace) workspace).close(ucdMonitor);
      // }
    }
    catch (Exception ex) {
      Log.error("Can't close workspace", ex);
    }
    Log.info(stopWatch.end("Time to close workspace")); //$NON-NLS-1$
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719712
src/main/org/ucdetector/UCDHeadless.java 181 189
rc/main/org/ucdetector/report/ReportExtension.jav 101 111
----------------------------------------
  private static void tryToStartDsPlugin() {
    try {
      Bundle fwAdminBundle = Platform.getBundle("org.eclipse.equinox.ds");
      fwAdminBundle.start();
    }
    catch (Exception e) {
      Log.error("PROBLEMS STARTING DS", e);
    }
  }

----------------------------------------
        else if (xslt == null && clazz != null) {
          try {
            //IUCDetectorReport reportObject = (IUCDetectorReport) WorkbenchPlugin.createExtension(report, ATTRIBUTE_CLASS);
            IUCDetectorReport reportObject = (IUCDetectorReport) report.createExecutableExtension(ATTRIBUTE_CLASS);// This line fixes headless exception
            classExtensions.add(new ReportExtension(resultFile, name, null, reportObject, id));
          }
          // Catch Throwable here because of headless problem here: java.lang.UnsatisfiedLinkError: Could not load SWT library. R
          catch (Throwable ex) {
            UCDetectorPlugin.logToEclipseLog("Can't load ReportExtension", ex); //$NON-NLS-1$
          }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719711
src/main/org/ucdetector/UCDHeadless.java 165 178
rc/main/org/ucdetector/report/ReportExtension.jav 101 111
----------------------------------------
  private void closeWorkspace() {
    StopWatch stopWatch = new StopWatch();
    try {
      workspace.save(true, new UCDProgressMonitor());// ucdMonitor throws an OperationCanceledException, when ProgressMonitor is canceled
      // causes npe: at org.eclipse.core.internal.resources.Workspace.removeResourceChangeListener(Workspace.java:2302)
      // if (workspace instanceof Workspace) {
      //   ((Workspace) workspace).close(ucdMonitor);
      // }
    }
    catch (Exception ex) {
      Log.error("Can't close workspace", ex);
    }
    Log.info(stopWatch.end("Time to close workspace")); //$NON-NLS-1$
  }

----------------------------------------
        else if (xslt == null && clazz != null) {
          try {
            //IUCDetectorReport reportObject = (IUCDetectorReport) WorkbenchPlugin.createExtension(report, ATTRIBUTE_CLASS);
            IUCDetectorReport reportObject = (IUCDetectorReport) report.createExecutableExtension(ATTRIBUTE_CLASS);// This line fixes headless exception
            classExtensions.add(new ReportExtension(resultFile, name, null, reportObject, id));
          }
          // Catch Throwable here because of headless problem here: java.lang.UnsatisfiedLinkError: Could not load SWT library. R
          catch (Throwable ex) {
            UCDetectorPlugin.logToEclipseLog("Can't load ReportExtension", ex); //$NON-NLS-1$
          }
        }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719713
src/main/org/ucdetector/report/XmlReport.java 203 208
rc/main/org/ucdetector/util/JavaElementUtil.jav 179 186
----------------------------------------
      if (sourceFolder != null && sourceFolder.getResource() != null) {
        IPath path = sourceFolder.getResource().getProjectRelativePath();
        if (path != null) {
          appendChild(marker, "sourceFolder", path.toString()); // NODE:  src/main
        }
      }

----------------------------------------
    if (isPrimary && result != null && result.getCompilationUnit() != null) {
      IType primaryType = result.getCompilationUnit().findPrimaryType();
      if (primaryType != null) {
        // Avoid return null for missing primary type.
        // Eg: Foo.java contains only class Bar
        result = primaryType;
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719714
src/main/org/ucdetector/report/XmlReport.java 203 208
rc/main/org/ucdetector/report/XmlReport.jav 238 243
----------------------------------------
      if (sourceFolder != null && sourceFolder.getResource() != null) {
        IPath path = sourceFolder.getResource().getProjectRelativePath();
        if (path != null) {
          appendChild(marker, "sourceFolder", path.toString()); // NODE:  src/main
        }
      }

----------------------------------------
    catch (Throwable ex) {
      Log.error("XML problems", ex);
      if (marker != null) {
        appendChild(marker, "ExceptionForCreatingMarker", ex.getMessage());
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719716
src/main/org/ucdetector/UCDetectorPlugin.java 373 380
rc/main/org/ucdetector/preferences/Prefs.jav 541 551
----------------------------------------
  public static String getHostName() {
    try {
      return java.net.InetAddress.getLocalHost().getHostName();
    }
    catch (Exception e) {
      return "?";
    }
  }

----------------------------------------
    for (String regex : filters) {
      // IPackageFragmentRoot can be "", filter can be ""
      try {
        if (regex.length() > 0 && Pattern.matches(regex, name)) {
          return true;
        }
      }
      catch (PatternSyntaxException e) {
        Log.warn(e.getMessage());
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719717
src/main/org/ucdetector/UCDetectorPlugin.java 299 308
rc/main/org/ucdetector/preferences/Prefs.jav 541 551
----------------------------------------
  public static void closeSave(Closeable closable) {
    if (closable != null) {
      try {
        closable.close();
      }
      catch (Exception e) {
        Log.warn("Can't close %s: %s", closable, e); //$NON-NLS-1$
      }
    }
  }

----------------------------------------
    for (String regex : filters) {
      // IPackageFragmentRoot can be "", filter can be ""
      try {
        if (regex.length() > 0 && Pattern.matches(regex, name)) {
          return true;
        }
      }
      catch (PatternSyntaxException e) {
        Log.warn(e.getMessage());
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719715
src/main/org/ucdetector/preferences/Prefs.java 425 433
rc/main/org/ucdetector/preferences/Prefs.jav 541 551
----------------------------------------
  private static boolean isConstant(IMember member) {
    try {
      return Flags.isStatic(member.getFlags()) && Flags.isFinal(member.getFlags());
    }
    catch (JavaModelException e) {
      Log.error("Can't get isConstant for: " + member, e);
      return false;
    }
  }

----------------------------------------
    for (String regex : filters) {
      // IPackageFragmentRoot can be "", filter can be ""
      try {
        if (regex.length() > 0 && Pattern.matches(regex, name)) {
          return true;
        }
      }
      catch (PatternSyntaxException e) {
        Log.warn(e.getMessage());
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719718
src/main/org/ucdetector/iterator/UCDetectorIterator.java 77 83
rc/main/org/ucdetector/iterator/UCDetectorIterator.jav 84 89
----------------------------------------
    if (Prefs.isFilterClassContainingString() && type.getCompilationUnit() != null) {
      String classAsString = type.getCompilationUnit().getSource();
      if (Prefs.isFilterClassContainingString(classAsString)) {
        debugNotHandle(type, "isFilterClassContainingString"); //$NON-NLS-1$
        return false;
      }
    }

----------------------------------------
    if (Prefs.isIgnoreDerived()) {
      if (type.getResource() != null && type.getResource().isDerived()) {
        debugNotHandle(type, "isIgnoreDerived"); //$NON-NLS-1$
        return false;
      }
    }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719719
src/main/org/ucdetector/search/LineManger.java 260 266
rc/main/org/ucdetector/iterator/UCDetectorIterator.jav 93 100
----------------------------------------
      if (typeBinding != null) {
        String name = typeBinding.getName();
        String fullName = typeBinding.getQualifiedName();
        if (Prefs.isFilterAnnotation(fullName) || Prefs.isFilterAnnotation(name)) {
          return true;
        }
      }

----------------------------------------
      for (IType superType : superTypes) {
        String simple = superType.getElementName();
        String full = superType.getFullyQualifiedName('.');
        if (Prefs.isFilterImplements(simple) || Prefs.isFilterImplements(full)) {
          debugNotHandle(type, "isFilterImplements"); //$NON-NLS-1$
          return false;
        }
      }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719720
src/cycle/org/ucdetector/cycle/model/Cycle.java 114 120
rc/main/org/ucdetector/iterator/UCDetectorIterator.jav 189 195
----------------------------------------
  private int getMatchCount() {
    int result = 0;
    for (CycleType cycleType : cycleList) {
      result += cycleType.getMatchCount();
    }
    return result;
  }

----------------------------------------
  public int getElelementsToDetectCount() {
    int result = 0;
    for (TypeContainer typeContainer : typeContainers) {
      result += typeContainer.size();
    }
    return result;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719729
src/cycle/org/ucdetector/cycle/model/Cycle.java 114 120
rc/cycle/org/ucdetector/cycle/model/CycleType.jav 60 66
----------------------------------------
  private int getMatchCount() {
    int result = 0;
    for (CycleType cycleType : cycleList) {
      result += cycleType.getMatchCount();
    }
    return result;
  }

----------------------------------------
  int getMatchCount() {
    int result = 0;
    for (CycleMember cycleMember : cycleMembers) {
      result += cycleMember.getChildrenSize();
    }
    return result;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719721
src/main/org/ucdetector/iterator/UCDetectorIterator.java 189 195
rc/cycle/org/ucdetector/cycle/model/CycleType.jav 60 66
----------------------------------------
  public int getElelementsToDetectCount() {
    int result = 0;
    for (TypeContainer typeContainer : typeContainers) {
      result += typeContainer.size();
    }
    return result;
  }

----------------------------------------
  int getMatchCount() {
    int result = 0;
    for (CycleMember cycleMember : cycleMembers) {
      result += cycleMember.getChildrenSize();
    }
    return result;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719722
src/main/org/ucdetector/iterator/CountIterator.java 85 93
rc/main/org/ucdetector/iterator/CountIterator.jav 96 103
----------------------------------------
  protected boolean handleType(IType type) throws CoreException {
    if (isPrivate(type) || Prefs.isFilterType(type)) {
      debugNotHandle(type, "isPrivate || isFilterType"); //$NON-NLS-1$ 
      return true;
    }
    debugHandle(type);
    classes++;
    return true;
  }

----------------------------------------
  protected void handleMethod(IMethod method) throws CoreException {
    if (isPrivate(method) || Prefs.isFilterMethod(method)) {
      debugNotHandle(method, "isPrivate || isFilterMethod"); //$NON-NLS-1$ 
      return;
    }
    debugHandle(method);
    methods++;
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719723
src/main/org/ucdetector/iterator/AbstractUCDetectorIterator.java 316 321
rc/main/org/ucdetector/iterator/AbstractUCDetectorIterator.jav 327 332
----------------------------------------
  protected static final void debugHandle(IMember member) {
    if (DEBUG) {
      Log.debug("    Handle %s '%s'", // //$NON-NLS-1$
          JavaElementUtil.getMemberTypeString(member), JavaElementUtil.getElementName(member));
    }
  }

----------------------------------------
  protected static final void debugNotHandle(IMember member, String reason) {
    if (DEBUG) {
      Log.debug("    Ignore %s '%s' because: %s",// //$NON-NLS-1$
          JavaElementUtil.getMemberTypeString(member), JavaElementUtil.getElementName(member), reason);
    }
  }

----------------------------------------
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
53
17719768
src/main/org/ucdetector/util/JavaElementUtil.java 678 684
rc/main/org/ucdetector/action/AbstractUCDetectorAction.jav 157 163
----------------------------------------
      if (member instanceof IMethod) {
        IMethod method = (IMethod) member;
        if (method.isConstructor()) {
          return MemberInfo.Constructor;
        }
        return MemberInfo.Method;
      }

----------------------------------------
      else if (selection instanceof IProject) {
        IProject project = (IProject) selection;
        IJavaProject javaProject = JavaCore.create(project);
        if (javaProject.exists()) {
          result.add(javaProject);
        }
      }

----------------------------------------
